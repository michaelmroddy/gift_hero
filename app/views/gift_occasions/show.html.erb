<div class="page-header">
  <h3>Gift Occasion: <%= @gift_occasion.occasion_type.occasion %>-<%= @gift_occasion.receiver.name %></h3>
</div>

<div class="row">
  <div class="col-md-12 mb-2">
    <dl class="dl-horizontal">
      <dt>Occasion</dt>
      <dd>
        <% if @gift_occasion.occasion_type.present? %>

            <%= @gift_occasion.occasion_type.occasion %>

        <% end %>
      </dd>

      <dt>Date</dt>
      <dd><%= @gift_occasion.date.strftime("%m/%d/%Y") %></dd>

      <dt>Receiver</dt>
      <dd>
        <% if @gift_occasion.receiver.present? %>
          <a href="/gift_receivers/<%= @gift_occasion.receiver_id %>">
            <%= @gift_occasion.receiver.name %>
          </a>
        <% end %>
      </dd>

      <dt>Budget</dt>
      <dd><%= @gift_occasion.budget %></dd>
      <dt>Num Gifts</dt>
      <dd><%= @gift_occasion.approved_gift_recommendations.length %></dd>
      <dt>Amount Spent</dt>
      <dd><%= @gift_occasion.total_cost %></dd>
      <dt>Days Left</dt>
      <dd><%=  ((@gift_occasion.date - Time.now)/(60*60*24)).round %></dd>
    </dl>

  </div>
</div>

<div class="row">
  <div class="col-md-12">
    <table class="table table-striped table-hover">
      <tr>
        <th>Gift</th>
        <th>Cost</th>
        <th>Url</th>
        <th>Selected</th>
        <th>Rating</th>
        <th>Recommender</th>
        <th>Description</th>
        <th>Actions</th>
      </tr>

      <% @gift_occasion.gift_recommendations.each do |gift_recommendation| %>
      <tr>
        <td><%= gift_recommendation.gift %></td>
        <td><%= gift_recommendation.cost %></td>
        <td><a href="<%= gift_recommendation.url %>"> URL</a></td>
        <td> <% if gift_recommendation.rejected %>
            Rejected
            <% elsif gift_recommendation.selected %>
            Approved
            <% else %>
            Pending
          <% end %>
        </td>
        <td>
          <span class="starRating" action = >
            <input id="rating5" type="radio" name="rating" value="5">
            <label for="rating5">5</label>
            <input id="rating4" type="radio" name="rating" value="4">
            <label for="rating4">4</label>
            <input id="rating3" type="radio" name="rating" value="3">
            <label for="rating3">3</label>
            <input id="rating2" type="radio" name="rating" value="2">
            <label for="rating2">2</label>
            <input id="rating1" type="radio" name="rating" value="1">
            <label for="rating1">1</label>
          </span>
        </td>
        <td>
          <% if gift_recommendation.recommender.present? %>
            <a href="/users/<%= gift_recommendation.recommender.id %>">
              <%= gift_recommendation.recommender.email %>
            </a>
          <% end %>
        </td>
        <td><%= gift_recommendation.description %></td>
        <td>
          <a href="/approve_gift_recommendations/<%= gift_recommendation.id %>" class="btn btn-primary">Approve</a>

          <a href="/reject_gift_recommendations/<%= gift_recommendation.id %>" class="btn btn-danger" rel="nofollow">Reject</a>
        </td>
      </tr>
      <% end %>
    </table>

  </div>
</div>
